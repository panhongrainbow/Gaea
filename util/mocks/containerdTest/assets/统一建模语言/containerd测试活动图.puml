@startuml

start
partition 触发阶段 {
: 检查 containerd 环境是否可以运作;
note right: 写在 setup.go

: 触发所需对象;
note right: 写在 containerdTest.go 和 setup.go

: 设置所需要的通道;
note right: 写在 containerdTest.go
}

partition 初始化阶段 {

: manager对象;
note right: 写在 manager.go

: run对象;
note right: 写在 run.go

: 载入设定文档;
note right: 写在 run.go

: 转成客户端对应数据;
note right: 写在 run.go 和 containerd.go

: 准备接收工作;
note right: 写在 manager.go
}

partition 服务阶段 {

if (是否有新工作) is (有接收到新工作) then
:辨别容器类型;
note left: 写在 mariadb.go

:执行容器操作;
note left: 写在 containerd.go

:重复执行工作;
note left: 写在 manager.go

:离开中断;
note left: 写在 containerdTest.go

else
:重新载入容器印象档;
note right: 写在 containerd.go

:设定优雅退出;
note right: 写在 containerdTest.go

endif
}

stop

@enduml
